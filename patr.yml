version: v1
kind: Pipeline
name: test-pipeline
steps:
  - name: cargo-build
    image: "rust:1"
    commands:
      - cargo build
  - name: cargo-clippy
    image: "rust:1"
    commands:
      - rustup component add clippy
      - cargo clippy
  - name: cargo-fmt
    image: "rust:1"
    commands:
      - rustup component add rustfmt
      - cargo fmt -v
  - name: echo-var
    image: alpine/git
    env:
      - name: var1
        value: hello
      - name: var2
        value: world
    commands:
      - echo $var1 $var2
